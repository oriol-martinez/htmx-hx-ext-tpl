(function(){function w(t,e){if(t){for(var r=0;r<t.length;r++){e(t[r])}}}function m(t,e){var r=t[0];var n=t[t.length-1];if(e.scroll){var i=null;if(e.scrollTarget){i=querySelectorExt(r,e.scrollTarget)}if(e.scroll==="top"&&(r||i)){i=i||r;i.scrollTop=0}if(e.scroll==="bottom"&&(n||i)){i=i||n;i.scrollTop=i.scrollHeight}}if(e.show){var i=null;if(e.showTarget){var l=e.showTarget;if(e.showTarget==="window"){l="body"}i=querySelectorExt(r,l)}if(e.show==="top"&&(r||i)){i=i||r;i.scrollIntoView({block:"start",behavior:htmx.config.scrollBehavior})}if(e.show==="bottom"&&(n||i)){i=i||n;i.scrollIntoView({block:"end",behavior:htmx.config.scrollBehavior})}}}function i(e,t,r,n){if(n==null){n={}}n["elt"]=t;w(t.children,function(t){e.triggerEvent(t,r,n)})}htmx.defineExtension("tpl",{tplAttr:"hx-tpl",version:"0.2.0",tplSwap:function(a){var o=this.internalAPI;var f=o.getTarget(a);var c=o.getSwapSpecification(a);f.classList.add(htmx.config.swappingClass);var t=o.getClosestAttributeValue(a,this.tplAttr);if(!t)return;var u=htmx.find(t);if(!u)return;var h=u.innerHTML;if(!o.triggerEvent(f,"htmx:beforeSwap"))return;var p={};var e=o.getClosestAttributeValue(a,"hx-push-url");var r=o.getClosestAttributeValue(a,"hx-replace-url");var n=null;var i=null;if(e){n="push";i=e}else if(r){n="replace";i=r}if(i&&i!=="false"){p={type:n,path:i}}if(p.type){o.saveCurrentPageToHistory()}var l=null;var s=null;var g=function(t){try{var e=document.activeElement;var r={};try{r={elt:e,start:e?e.selectionStart:null,end:e?e.selectionEnd:null}}catch(t){}var n={tasks:[],elts:[f],source:u};o.selectAndSwap(c.swapStyle,f,a,h,n);if(r.elt&&!o.bodyContains(r.elt)&&r.elt.getAttribute("id")){var i=document.getElementById(r.elt.getAttribute("id"));var l={preventScroll:c.focusScroll!==undefined?!c.focusScroll:!htmx.config.defaultFocusScroll};if(i){if(r.start&&i.setSelectionRange){try{i.setSelectionRange(r.start,r.end)}catch(t){}}i.focus(l)}}f.classList.remove(htmx.config.swappingClass);w(n.elts,function(t){if(t.classList){t.classList.add(htmx.config.settlingClass)}o.triggerEvent(t,"htmx:afterSwap")});var s=function(){w(n.tasks,function(t){t.call()});w(n.elts,function(t){if(t.classList){t.classList.remove(htmx.config.settlingClass)}o.triggerEvent(t,"htmx:afterSettle")});if(p.type){if(p.type==="push"){o.pushUrlIntoHistory(p.path);o.triggerEvent(o.getDocument().body,"htmx:pushedIntoHistory",{path:p.path})}else{o.replaceUrlInHistory(p.path);o.triggerEvent(getDocument().body,"htmx:replacedInHistory",{path:p.path})}}if(n.title){var t=htmx.find("title");if(t){t.innerHTML=n.title}else{window.document.title=n.title}}m(n.elts,c);if(o.settleResolve)o.settleResolve()};if(c.settleDelay>0){setTimeout(s,c.settleDelay)}else{o.doSettle()}}catch(t){o.triggerErrorEvent(a,"htmx:swapError",h);if(o.settleReject)o.settleReject();throw t}};var v=htmx.config.globalViewTransitions;if(c.hasOwnProperty("transition")){v=c.transition}if(v&&o.triggerEvent(a,"htmx:beforeTransition",responseInfo)&&typeof Promise!=="undefined"&&document.startViewTransition){var d=new Promise(function(t,e){l=t;s=e});var x=g;g=function(t){document.startViewTransition(function(){x(t);return d})}}if(c.swapDelay>0){setTimeout(function(){g(this)},c.swapDelay)}else{g(this)}},tplSwapStyles:{move:function(t,e){e.innerHTML=t.innerHTML;t.innerHTML=""},replace:function(t,e){e.outerHTML=t.outerHTML},trade:function(t,e){var r=t.innerHTML;t.innerHTML=e.innerHTML;e.innerHTML=r},exchange:function(t,e){var r=t.outerHTML;t.outerHTML=e.outerHTML;e.outerHTML=r}},handleSwapBeforeEvents:function(t,e){var r=this.internalAPI;var n=e[0].toUpperCase()+e.slice(1);r.triggerEvent(t,"extTplBefore");i(r,t,"extTplBefore");r.triggerEvent(t,"extTplBefore"+n);i(r,t,"extTplBefore"+n)},handleSwapAfterEvents:function(t,e){var r=this.internalAPI;var n=e[0].toUpperCase()+e.slice(1);r.triggerEvent(t,"extTplAfter"+n);r.triggerEvent(t,"extTplAfter");htmx.process(t);i(r,t,"extTplAfter"+n);i(r,t,"extTplAfter")},init:function(t){this.internalAPI=t},onEvent:function(t,e){var r=this.internalAPI;var n=e.target;if(t=="htmx:beforeProcessNode"&&r.getAttributeValue(n,this.tplAttr)&&!r.hasAttribute(n,"hx-trigger")){n.setAttribute("hx-trigger","click");var i=r.getTarget(n);i.setAttribute("hx-ext","tpl");return true}else if(t=="htmx:trigger"&&r.getAttributeValue(n,this.tplAttr)){return this.tplSwap(n)}return true},handleSwap:function(t,e,r,n){if(Object.keys(this.tplSwapStyles).indexOf(t)==-1)return false;var i=n.source;this.handleSwapBeforeEvents(i,t);if(t=="trade"||t=="exchange")this.handleSwapAfterEvents(e,t);this.tplSwapStyles[t](i,e);this.handleSwapAfterEvents(e,t);if(t=="trade"||t=="exchange")this.handleSwapAfterEvents(i,t);return true}})})();