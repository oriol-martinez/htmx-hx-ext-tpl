htmx.defineExtension("tpl",{tplAttr:"hx-tpl",init:function(t){this.internalAPI=t;this.forEach=function t(e,r){if(e){for(var i=0;i<e.length;i++){r(e[i])}}};this.updateScrollState=function(t,e){var r=t[0];var i=t[t.length-1];if(e.scroll){var l=null;if(e.scrollTarget){l=querySelectorExt(r,e.scrollTarget)}if(e.scroll==="top"&&(r||l)){l=l||r;l.scrollTop=0}if(e.scroll==="bottom"&&(i||l)){l=l||i;l.scrollTop=l.scrollHeight}}if(e.show){var l=null;if(e.showTarget){var s=e.showTarget;if(e.showTarget==="window"){s="body"}l=querySelectorExt(r,s)}if(e.show==="top"&&(r||l)){l=l||r;l.scrollIntoView({block:"start",behavior:htmx.config.scrollBehavior})}if(e.show==="bottom"&&(i||l)){l=l||i;l.scrollIntoView({block:"end",behavior:htmx.config.scrollBehavior})}}}},onEvent:function(t,e){var n=this.internalAPI;var a=e.target;if(t=="htmx:beforeProcessNode"&&n.getAttributeValue(a,this.tplAttr)&&!n.hasAttribute(a,"hx-trigger")){a.setAttribute("hx-trigger","click");var c=n.getTarget(a);c.setAttribute("hx-ext","tpl");return true}else if(t=="htmx:trigger"&&n.getAttributeValue(a,this.tplAttr)){var c=n.getTarget(a);var f=n.getSwapSpecification(a);c.classList.add(htmx.config.swappingClass);var r=n.getClosestAttributeValue(a,this.tplAttr);if(!r)return;var i=htmx.find(r);if(!i)return;var u=i.innerHTML;if(!n.triggerEvent(c,"htmx:beforeSwap"))return;var h={};var l=n.getClosestAttributeValue(a,"hx-push-url");var s=n.getClosestAttributeValue(a,"hx-replace-url");var o=null;var g=null;if(l){o="push";g=l}else if(s){o="replace";g=s}if(g&&g!=="false"){h={type:o,path:g}}if(h.type){n.saveCurrentPageToHistory()}var v=null;var p=null;var m=function(e){try{var t=document.activeElement;var r={};try{r={elt:t,start:t?t.selectionStart:null,end:t?t.selectionEnd:null}}catch(t){}var i=n.makeSettleInfo(c);n.selectAndSwap(f.swapStyle,c,a,u,i);if(r.elt&&!n.bodyContains(r.elt)&&r.elt.getAttribute("id")){var l=document.getElementById(r.elt.getAttribute("id"));var s={preventScroll:f.focusScroll!==undefined?!f.focusScroll:!htmx.config.defaultFocusScroll};if(l){if(r.start&&l.setSelectionRange){try{l.setSelectionRange(r.start,r.end)}catch(t){}}l.focus(s)}}c.classList.remove(htmx.config.swappingClass);e.forEach(i.elts,function(t){if(t.classList){t.classList.add(htmx.config.settlingClass)}n.triggerEvent(t,"htmx:afterSwap")});var o=function(){e.forEach(i.tasks,function(t){t.call()});e.forEach(i.elts,function(t){if(t.classList){t.classList.remove(htmx.config.settlingClass)}n.triggerEvent(t,"htmx:afterSettle")});if(h.type){if(h.type==="push"){n.pushUrlIntoHistory(h.path);n.triggerEvent(n.getDocument().body,"htmx:pushedIntoHistory",{path:h.path})}else{n.replaceUrlInHistory(h.path);n.triggerEvent(getDocument().body,"htmx:replacedInHistory",{path:h.path})}}if(i.title){var t=htmx.find("title");if(t){t.innerHTML=i.title}else{window.document.title=i.title}}e.updateScrollState(i.elts,f);if(n.settleResolve)n.settleResolve()};if(f.settleDelay>0){setTimeout(o,f.settleDelay)}else{n.doSettle()}}catch(t){n.triggerErrorEvent(a,"htmx:swapError",u);if(n.settleReject)n.settleReject();throw t}};var d=htmx.config.globalViewTransitions;if(f.hasOwnProperty("transition")){d=f.transition}if(d&&n.triggerEvent(a,"htmx:beforeTransition",responseInfo)&&typeof Promise!=="undefined"&&document.startViewTransition){var x=new Promise(function(t,e){v=t;p=e});var w=m;m=function(t){document.startViewTransition(function(){w(t);return x})}}if(f.swapDelay>0){setTimeout(function(){m(this)},f.swapDelay)}else{m(this)}}return true}});